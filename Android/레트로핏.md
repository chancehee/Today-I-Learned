### 20211110  

### 레트로핏 예제를 통한 공부  

최근 유튜브 강의를 통해 Unsplash이미지를 Retrofit을 통한 api 호출예제를 공부중인데, 작동 방식이나 개념에 대한 모르는 부분이 너무 많아서  
간단한 예제를 통해 공부해야겠다고 생각했다.  
예제를 통해 공부한 내용은 버튼을 누르면 GET 방식을 통해 api를 불러오는 내용이다.  
레트로핏을 사용하기 위한 메인 재료로는 크게 레트로핏 매니저,레트로핏 클라이언트, 인터페이스 이렇게 3가지가 있다.  
(로깅 인터셉터는 나중에 공부할 예정이다.)  
먼저 인터페이스는 어노테이션 GET을 통해서 접근하여 Call<JsonElement> 로 값을 받아오는 함수를 담는 부분이다.  
이 부분을 예제에서는 ApiService 라고 정의하였다.  
레트로핏 클라이언트에서는 retrofitClient라는 변수를 선언하고 getClient라는 함수를 만들었다 이 부분에서는 디자인 패턴중 하나인 싱클턴 패턴으로 레트로핏 클라이언트를 빌드해준다.  
사람들 말에 따르면 레트로핏을 사용할때 싱글턴으로 구현하는 것이 거의 고정이라고 한다.  
레트로핏 클라이언트가 있다면 기존에 생성된 클라이언트를 사용하고, 없다면 Builder() 패턴을 사용하여 생성해준다.(이때 baseUrl 설정 및 여러 설정을 해줄 수 있다.  
생성된 retrofitClient를 반환해주는 함수를 다 작성하면, 레트로핏 매니저에서 최종 설정을 해준다.  
httpCall이라는 변수를 레트로핏 클라이언트에 baseUrl설정을 해준후 클라이언트를 가져올때 인터페이스부분을 연결해주어 가져온다. 
레트로핏 매니저 부분에서도 함수를 하나 설정하고 httpCall부분에서 값을 받아와 enque처리한 후 값을 가져올 수 있다.  
또한 competion 처리를 통해서 값을 Unit으로 전달하고 이를 메인엑티비티에서 불러와 사용할 수 있다.  
(completion 부분도 추후에 공부할 예정이다.)  
  
안드로이드 개발함에 있어서 레트로핏은 러닝커브가 높은 편이지만 다들 꼭 해야하는 기본중에 기본이다 라고 말을 한다.   
공부를 함에 있어서 어렵다고 느껴지지만, 공부를 꾸준히 하여 내 것으로 꼭 만들 예정이다.

  
![화면 캡처 2021-11-10 133440](https://user-images.githubusercontent.com/59447235/141050466-e053cfe4-fbb0-40e8-9ee1-6bcb5d82c4b4.jpg)  
![화면 캡처 2021-11-10 133601](https://user-images.githubusercontent.com/59447235/141050533-83f6d853-c6fd-4d85-b9f0-32ddc8bc7c40.jpg)  
![화면 캡처 2021-11-10 133729](https://user-images.githubusercontent.com/59447235/141050670-1f60e617-edf6-4971-a4b1-1799cf7d144b.jpg)
